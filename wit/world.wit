package mus-uc:devtools@0.1.0;

interface types {
    variant result-string {
        ok(string),
        err(string),
    }

    variant result-bool {
        ok(bool),
        err(string),
    }

    variant result-list {
        ok(list<string>),
        err(string),
    }

    variant result-bytes {
        ok(list<u8>),
        err(string),
    }
}

interface client {
    use types.{result-string, result-bool, result-list, result-bytes};

    resource connection {
        // CSS Manager methods
        css-initialize: func() -> result-string;
        css-load: func(content: string, id: option<string>) -> result-string;
        css-unload: func(id: string) -> result-bool;
        css-clear-all: func() -> result-string;
        css-list: func() -> result-list;

        // Marionette methods
        execute: func(script: string, args: option<string>) -> result-string;
        
        // Screenshot methods
        screenshot: func(selector: option<string>) -> result-bytes;
    }

    connect: func(host: string, port: u16) -> result<connection, string>;
}

world mus-uc-component {
    export client;
}
